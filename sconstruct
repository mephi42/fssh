env = Environment()
env.Append(CFLAGS=['-std=c99', '-Wall', '-Werror', '-g3', '-O3'])
env.Append(LIBS=['event', 'lttng-ust', 'zmq'])

client = env.StaticObject('client.o', 'client.c')
daemon = env.StaticObject('daemon.o', 'daemon.c')
fwd = env.StaticObject('fwd.o', 'fwd.c')
message = env.StaticObject('message.o', 'message.c')
nonblock = env.StaticObject('nonblock.o', 'nonblock.c')
ringbuf = env.StaticObject('ringbuf.o', 'ringbuf.c')
sigutils = env.StaticObject('sigutils.o', 'sigutils.c')
un = env.StaticObject('un.o', 'un.c')

fssh_client = env.Program('fssh-client', [client, message, nonblock])
fssh_fwd = env.Program('fssh-fwd', [fwd, nonblock, ringbuf, sigutils, un])
fssh_daemon = env.Program('fssh-daemon', [daemon, message, nonblock])
